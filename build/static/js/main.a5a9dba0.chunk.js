(this["webpackJsonpreact-person"]=this["webpackJsonpreact-person"]||[]).push([[0],{60:function(e,t,n){},61:function(e,t,n){},63:function(e,t,n){},70:function(e,t,n){},89:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(16),i=n.n(s),c=(n(60),n(15)),o=(n(61),n(8)),l=n.n(o),u=n(22),d=n(12),p=n(11),j=n(13),b=(n(63),n(109)),m=n(47),h=n.n(m),y=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",headers:{"Content-Type":"application/json"}},e.next=3,fetch("/person",t).then((function(e){if(e.ok)return e.json();throw e}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"GET"},e.next=3,fetch("person/".concat(t,"/").concat(n),a).then((function(e){if(e.ok)return e.json();throw e}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,a,r,s,i,c,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.formData,a=t.url,r=Object.fromEntries(n.entries()),s=JSON.stringify(r),i={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:s},e.next=6,fetch(a,i);case 6:if((c=e.sent).ok){e.next=12;break}return e.next=10,c.text();case 10:throw o=e.sent,new Error(o);case 12:return e.abrupt("return",c.json());case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,a,r,s,i,c,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.formData,a=t.url,r=Object.fromEntries(n.entries()),s=JSON.stringify(r),i={method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},body:s},e.next=6,fetch(a,i);case 6:if((c=e.sent).ok){e.next=12;break}return e.next=10,c.text();case 10:throw o=e.sent,new Error(o);case 12:return e.abrupt("return",c.json());case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"DELETE"},e.next=3,fetch("person/".concat(t),n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(e){var t=e.currentTarget,n=t.action;return{formData:new FormData(t),url:n}},T=n(1);function I(e){var t,n=e.setPersonList,a=e.setFormData,r=e.formData,s=e.initialState,i=function(e){a((function(t){return Object(j.a)(Object(j.a)({},t),{},Object(p.a)({},e.name,e.value))}))},c=function(){var e=Object(d.a)(l.a.mark((function e(t){var r,i,c,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,r=v(t),i=r.formData,c=r.url,e.next=5,x({formData:i,url:c});case 5:o=e.sent,n((function(e){return[o].concat(Object(u.a)(e))})),a(s),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(T.jsxs)("form",{className:"personForm",action:"/person",onSubmit:c,style:{backgroundColor:"#9AC2C9"},children:[Object(T.jsx)("h1",{style:{paddingLeft:"24px",color:"#008080",fontWeight:"700"},children:"Ajouter une Personne"}),Object(T.jsxs)("div",{className:"personForm__item",children:[Object(T.jsx)("label",{children:"Pr\xe9nom"}),Object(T.jsx)("input",{type:"text",placeholder:"Votre pr\xe9nom",value:r.firstname,name:"firstname",onChange:function(e){return i(e.target)},required:!0})]}),Object(T.jsxs)("div",{className:"personForm__item",children:[Object(T.jsx)("label",{children:"Nom"}),Object(T.jsx)("input",{type:"text",placeholder:"Votre nom de famille",value:r.lastname,name:"lastname",onChange:function(e){return i(e.target)},required:!0})]}),Object(T.jsxs)("div",{className:"personForm__item",children:[Object(T.jsx)("label",{children:"Adresse Email"}),Object(T.jsx)("input",{type:"email",placeholder:"-----@-----.---",value:r.address,name:"address",onChange:function(e){return i(e.target)},required:!0})]}),Object(T.jsxs)("div",{className:"personForm__item",children:[Object(T.jsx)("label",{children:"Actif"}),Object(T.jsxs)("select",{onChange:function(e){return i(e.target)},value:r.isActive,name:"isActive",children:[Object(T.jsx)("option",{value:"true",children:"Oui"}),Object(T.jsx)("option",{value:"false",children:"Non"})]})]}),Object(T.jsx)("div",{className:"personForm__item",children:Object(T.jsx)(b.a,(t={variant:"contained",color:"primary",type:"submit",value:"Ajouter Personne",style:{borderRadius:50},endIcon:Object(T.jsx)(h.a,{})},Object(p.a)(t,"style",{backgroundColor:"#008080"}),Object(p.a)(t,"children","Ajouter Personne"),t))})]})}n(70);var w=n(19),N=n.n(w),C=n(48),k=n.n(C),F=n(117),D=n(112),A=n(113),M=n(115),S=n(114),E=n(116),L=n(111),P=n(40),_=n(50),V=n.n(_),W=n(39),R=n.n(W),B=n(49),J=n.n(B),q=n(23),z=n.n(q),G={id:"",firstname:"",lastname:"",address:"",isActive:""},H={id:!1,firstname:!1,lastname:!1,address:!1,isActive:!1};function U(e){var t=e.setPersonList,n=e.personList,s=K(),i=Object(a.useState)(null),o=Object(c.a)(i,2),m=o[0],h=o[1],y=Object(a.useState)(G),x=Object(c.a)(y,2),I=x[0],w=x[1],C=Object(a.useState)([]),F=Object(c.a)(C,2),_=F[0],W=F[1],B=Object(a.useState)(H),q=Object(c.a)(B,2),U=q[0],Q=q[1],X=Object(a.useState)("id"),Y=Object(c.a)(X,2),Z=Y[0],$=Y[1],ee=function(e){var t=e.target,n=t.value,a=t.name;w((function(e){return Object(j.a)(Object(j.a)({},e),{},Object(p.a)({},a,n))}))},te=function(e){if(N()(e.currentTarget).attr("class").includes("editableIcon")){var t=N()(N()(e.currentTarget).parents()[3]).find(".personID").text(),n=_.findIndex((function(e){return parseInt(e.id)===parseInt(t)}));h(n)}},ne=function(e){var t=e.value,n=e.name,a=e.type,s=e.lastRow;return Object(T.jsx)(r.a.Fragment,{children:Object(T.jsx)("div",{style:{display:"flex",justifyContent:"flex-start",width:s?"70%":"100%"},children:Object(T.jsx)("input",{className:"MuiTypography-root MuiTypography-h7 MuiTypography-displayInline",defaultValue:t,name:n,type:a,style:{border:"#008080 solid 0.5px",width:"100%",margin:"2px"}})})})},ae=function(){var e=Object(d.a)(l.a.mark((function e(n){var a,r,s,i,c,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a=N()(n.currentTarget).find(".personID").find("input").attr("value"),r=_.findIndex((function(e){return parseInt(e.id)===parseInt(a)})),s="person/".concat(a),e.prev=4,i=v(n),c=i.formData,i._,e.next=8,O({formData:c,url:s});case 8:o=e.sent,t((function(e){return[].concat(Object(u.a)(e.slice(0,r)),[o],Object(u.a)(e.slice(r+1)))})),h(-1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}(),re=function(e){Q((function(t){return Object(j.a)(Object(j.a)({},t),{},Object(p.a)({},e,!U[e]))})),console.log(e),$(e),N()(".columnFilter").val("")};return Object(a.useEffect)((function(){W(n)}),[n]),Object(a.useEffect)((function(){var e=function(e,t){var n={};t.map((function(e){return n[e.id]=0})),t.map((function(t){Object.entries(t).map((function(a){String(a[1]).toLowerCase().startsWith(String(e[a[0]]).toLowerCase())&&""!=String(e[a[0]])&&(n[t.id]+=1)}))}));var a=Object.values(e).filter(Boolean).length;return n=Object.entries(n).filter((function(e){return e[1]===a})),n=Object.fromEntries(n),Object.keys(n)}(I,n);0!=e.length&&W(n.filter((function(t,n){return e.includes(String(t.id))})))}),[I]),Object(a.useEffect)((function(){U[Z]?(console.log(Z),console.log(U[Z]),console.log("true"),f(Z,"desc").then((function(e){W(e)}))):(console.log("false"),f(Z,"asc").then((function(e){W(e)})))}),[Z,U]),Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(k.a,{style:{width:"70%",height:"100%"},renderTrackHorizontal:function(e){return Object(T.jsx)("div",Object(j.a)(Object(j.a)({},e),{},{style:{display:"none"},className:"track-horizontal"}))},children:Object(T.jsx)(L.a,{item:!0,xs:16,md:12,children:Object(T.jsxs)(D.a,{className:s.List,children:[Object(T.jsxs)(A.a,{className:s.listItem,style:{backgroundColor:"#9AC2C980"},children:[Object(T.jsx)(S.a,{disableTypography:!0,primary:Object(T.jsx)(b.a,{type:"body2",style:{fontWeight:700,width:10,color:"#004040"},onClick:function(){return re("id")},endIcon:Object(T.jsx)(z.a,{}),children:"ID"}),className:s.listItemText}),Object(T.jsx)(S.a,{disableTypography:!0,primary:Object(T.jsx)(b.a,{type:"body2",style:{fontWeight:700,width:10,color:"#004040"},onClick:function(){return re("firstname")},endIcon:Object(T.jsx)(z.a,{}),children:"Pr\xe9nom"}),className:s.listItemText}),Object(T.jsx)(S.a,{disableTypography:!0,primary:Object(T.jsx)(b.a,{type:"body2",style:{fontWeight:700,width:10,color:"#004040"},onClick:function(){return re("lastname")},endIcon:Object(T.jsx)(z.a,{}),children:"Nom"}),className:s.listItemText}),Object(T.jsx)(S.a,{disableTypography:!0,primary:Object(T.jsx)(b.a,{type:"body2",style:{fontWeight:700,width:10,color:"#004040"},onClick:function(){return re("address")},endIcon:Object(T.jsx)(z.a,{}),children:"Adresse"}),className:s.listItemText}),Object(T.jsx)(S.a,{disableTypography:!0,primary:Object(T.jsx)(b.a,{type:"body2",style:{fontWeight:700,width:10,color:"#004040",paddingRight:30},onClick:function(){return re("isActive")},endIcon:Object(T.jsx)(z.a,{}),children:"Actif"}),className:s.listItemText}),Object(T.jsx)(M.a,{children:Object(T.jsx)(E.a,{edge:"end","aria-label":"delete",type:"submit",children:Object(T.jsx)(R.a,{style:{display:"none"}})})}),Object(T.jsx)(M.a,{children:Object(T.jsx)(E.a,{edge:"end","aria-label":"delete",type:"submit",children:Object(T.jsx)(R.a,{style:{display:"none"}})})})]}),Object(T.jsx)("form",{className:"filterForm",children:Object(T.jsxs)(A.a,{className:s.listItem,children:[Object(T.jsx)(S.a,{disableTypography:!0,primary:Object(T.jsx)("div",{style:{display:"flex",justifyContent:"flex-start",width:"100%"},children:Object(T.jsx)("input",{className:"MuiTypography-root MuiTypography-h7 MuiTypography-displayInline columnFilter",defaultValue:I.id,onChange:ee,name:"id",style:{border:"#008080 solid 0.5px",width:"100%",margin:"2px"},placeholder:"Filtrer"})}),className:s.listItemText}),Object(T.jsx)(S.a,{disableTypography:!0,primary:Object(T.jsx)("div",{style:{display:"flex",justifyContent:"flex-start",width:"100%"},children:Object(T.jsx)("input",{className:"MuiTypography-root MuiTypography-h7 MuiTypography-displayInline columnFilter",defaultValue:I.firstname,onChange:ee,name:"firstname",style:{border:"#008080 solid 0.5px",width:"100%",margin:"2px"},placeholder:"Filtrer"})}),className:s.listItemText}),Object(T.jsx)(S.a,{disableTypography:!0,primary:Object(T.jsx)("div",{style:{display:"flex",justifyContent:"flex-start",width:"100%"},children:Object(T.jsx)("input",{className:"MuiTypography-root MuiTypography-h7 MuiTypography-displayInline columnFilter",defaultValue:I.lastname,onChange:ee,name:"lastname",style:{border:"#008080 solid 0.5px",width:"100%",margin:"2px"},placeholder:"Filtrer"})}),className:s.listItemText}),Object(T.jsx)(S.a,{disableTypography:!0,primary:Object(T.jsx)("div",{style:{display:"flex",justifyContent:"flex-start",width:"100%"},children:Object(T.jsx)("input",{className:"MuiTypography-root MuiTypography-h7 MuiTypography-displayInline columnFilter",defaultValue:I.address,onChange:ee,name:"address",style:{border:"#008080 solid 0.5px",width:"100%",margin:"2px"},placeholder:"Filtrer"})}),className:s.listItemText}),Object(T.jsx)(S.a,{disableTypography:!0,primary:Object(T.jsx)("div",{style:{display:"flex",justifyContent:"flex-start",width:"70%"},children:Object(T.jsx)("input",{className:"MuiTypography-root MuiTypography-h7 MuiTypography-displayInline columnFilter",defaultValue:I.isActive,onChange:ee,name:"isActive",style:{border:"#008080 solid 0.5px",width:"100%",margin:"2px"},placeholder:"Filtrer"})}),className:s.listItemText})]})}),_.map((function(e,t){return t===m?Object(T.jsx)("form",{className:"editForm",onSubmit:ae,children:Object(T.jsxs)(A.a,{className:s.listItem,children:[Object(T.jsx)(S.a,{disableTypography:!0,primary:Object(T.jsx)(ne,{value:e.id,name:"id"}),className:"".concat(s.listItemText," personID")}),Object(T.jsx)(S.a,{disableTypography:!0,primary:Object(T.jsx)(ne,{value:e.firstname,name:"firstname"}),className:s.listItemText}),Object(T.jsx)(S.a,{disableTypography:!0,primary:Object(T.jsx)(ne,{value:e.lastname,name:"lastname"}),className:s.listItemText}),Object(T.jsx)(S.a,{disableTypography:!0,primary:Object(T.jsx)(ne,{value:e.address,name:"address",type:"email"}),className:s.listItemText}),Object(T.jsx)(S.a,{disableTypography:!0,primary:Object(T.jsx)(ne,{value:e.isActive,name:"isActive",lastRow:!0}),className:s.listItemText}),Object(T.jsx)(M.a,{children:Object(T.jsx)(E.a,{edge:"end","aria-label":"edit",type:"submit",children:Object(T.jsx)(R.a,{style:{fill:"#008080"}})})})]})}):Object(T.jsxs)(A.a,{className:s.listItem,children:[Object(T.jsx)(S.a,{disableTypography:!0,primary:Object(T.jsx)(P.a,{type:"body2",children:e.id}),className:"".concat(s.listItemText," personID")}),Object(T.jsx)(S.a,{disableTypography:!0,primary:Object(T.jsx)(P.a,{type:"body2",children:e.firstname}),className:s.listItemText}),Object(T.jsx)(S.a,{disableTypography:!0,primary:Object(T.jsx)(P.a,{type:"body2",children:e.lastname}),className:s.listItemText}),Object(T.jsx)(S.a,{disableTypography:!0,primary:Object(T.jsx)(P.a,{type:"body2",children:e.address}),className:s.listItemText}),Object(T.jsx)(S.a,{disableTypography:!0,primary:Object(T.jsx)(P.a,{type:"body2",children:parseInt(e.isActive)?"1":"0"}),className:s.listItemText}),Object(T.jsxs)(M.a,{children:[Object(T.jsx)(E.a,{edge:"end","aria-label":"edit",children:Object(T.jsx)(J.a,{style:{fill:"#008080"},onClick:te,className:"editableIcon"})}),Object(T.jsx)(E.a,{edge:"end","aria-label":"delete",children:Object(T.jsx)(V.a,{style:{fill:"#008080"},onClick:function(e){e.preventDefault(),e.stopPropagation();var t=N()(N()(e.currentTarget).parents()[3]).find(".personID").text();g(t).then((function(){var e=_.findIndex((function(e){return e.id===parseInt(t)})),n=Object(u.a)(_);n.splice(e,1),W(n)}))}})})]})]})}))]})})})})}var K=Object(F.a)((function(e){var t;return{listItem:{backgroundColor:"none","&:hover":{backgroundColor:"rgba(0,0,0,0.05);",cursor:"pointer"},padding:4},listItemText:{display:"flex",justifyContent:"flex-start","&:nth-child(1)":{width:"10%",justifyContent:"center"},"&:nth-child(2)":{width:"20%"},"&:nth-child(3)":{width:"20%"},"&:nth-child(4)":{width:"30%"},"&:nth-child(5)":{width:"20%"}},button:Object(p.a)({margin:e.spacing(1)},e.breakpoints.down("sm"),{minWidth:32,paddingLeft:8,paddingRight:8,marginBottom:40,cursor:"pointer","& .MuiButton-startIcon":{margin:0}}),buttonText:(t={},Object(p.a)(t,e.breakpoints.down("sm"),{display:"none"}),Object(p.a)(t,"display","flex"),Object(p.a)(t,"marginRight",5),t),List:{padding:0},Input:{"&:nth-child(5)":{width:"70%"}}}})),Q={id:"",firstname:"",lastname:"",address:"",isActive:"1"};var X=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(Q),i=Object(c.a)(s,2),o=i[0],l=i[1];return Object(a.useEffect)((function(){y().then((function(e){return r(e)}))}),[]),Object(T.jsxs)("div",{className:"App",children:[Object(T.jsx)(I,{setPersonList:r,setFormData:l,formData:o,style:{backgroundColor:"#1169cf"},initialState:Q}),Object(T.jsx)(U,{setFormData:l,setPersonList:r,personList:n})]})},Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,119)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),s(e),i(e)}))};i.a.render(Object(T.jsx)(r.a.StrictMode,{children:Object(T.jsx)(X,{})}),document.getElementById("root")),Y()}},[[89,1,2]]]);
//# sourceMappingURL=main.a5a9dba0.chunk.js.map