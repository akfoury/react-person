(this["webpackJsonpreact-person"]=this["webpackJsonpreact-person"]||[]).push([[0],{58:function(e,t,a){},59:function(e,t,a){},61:function(e,t,a){},68:function(e,t,a){},87:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(14),i=a.n(s),c=(a(58),a(19)),l=(a(59),a(9)),o=a.n(l),d=a(22),p=a(13),u=a(11),j=a(17),b=(a(61),a(108)),m=a(46),h=a.n(m),y=a(18),x=a.n(y),f=function(){var e=Object(p.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",headers:{"Content-Type":"application/json"}},e.next=3,fetch("/person",t).then((function(e){if(e.ok)return e.json();throw e}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(p.a)(o.a.mark((function e(t){var a,r,n,s,i,c,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.formData,r=t.url,n=Object.fromEntries(a.entries()),s=JSON.stringify(n),i={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:s},e.next=6,fetch(r,i);case 6:if((c=e.sent).ok){e.next=12;break}return e.next=10,c.text();case 10:throw l=e.sent,new Error(l);case 12:return e.abrupt("return",c.json());case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(p.a)(o.a.mark((function e(t){var a,r,n,s,i,c,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.formData,r=t.url,console.log(a),n=Object.fromEntries(a.entries()),s=JSON.stringify(n),i={method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},body:s},e.next=7,fetch(r,i);case 7:if((c=e.sent).ok){e.next=13;break}return e.next=11,c.text();case 11:throw l=e.sent,new Error(l);case 13:return e.abrupt("return",c.json());case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(p.a)(o.a.mark((function e(t,a){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"DELETE"},e.next=3,fetch("person/".concat(a),r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),T=function(e){var t=e.currentTarget,a=t.action;return{formData:new FormData(t),url:a}},I=a(1);function w(e){var t,a=e.setPersonList,r=e.setFormData,n=e.formData,s=e.initialState,i=function(e){r((function(t){return Object(j.a)(Object(j.a)({},t),{},Object(u.a)({},e.name,e.value))}))},c=function(){var e=Object(p.a)(o.a.mark((function e(t){var n,i,c,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,n=T(t),i=n.formData,c=n.url,e.next=5,O({formData:i,url:c});case 5:l=e.sent,a((function(e){return[l].concat(Object(d.a)(e))})),r(s),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsxs)("form",{className:"personForm",action:"/person",onSubmit:c,style:{backgroundColor:"#9AC2C9"},children:[Object(I.jsx)("h1",{style:{paddingLeft:"24px",color:"#008080",fontWeight:"700"},children:"Ajouter une Personne"}),Object(I.jsxs)("div",{className:"personForm__item",children:[Object(I.jsx)("label",{children:"Pr\xe9nom"}),Object(I.jsx)("input",{type:"text",placeholder:"Votre pr\xe9nom",value:n.firstname,name:"firstname",onChange:function(e){return i(e.target)},required:!0})]}),Object(I.jsxs)("div",{className:"personForm__item",children:[Object(I.jsx)("label",{children:"Nom"}),Object(I.jsx)("input",{type:"text",placeholder:"Votre nom de famille",value:n.lastname,name:"lastname",onChange:function(e){return i(e.target)},required:!0})]}),Object(I.jsxs)("div",{className:"personForm__item",children:[Object(I.jsx)("label",{children:"Adresse Email"}),Object(I.jsx)("input",{type:"email",placeholder:"-----@-----.---",value:n.address,name:"address",onChange:function(e){return i(e.target)},required:!0})]}),Object(I.jsxs)("div",{className:"personForm__item",children:[Object(I.jsx)("label",{children:"Actif"}),Object(I.jsxs)("select",{onChange:function(e){return i(e.target)},value:n.isActive,name:"isActive",children:[Object(I.jsx)("option",{value:"true",children:"Oui"}),Object(I.jsx)("option",{value:"false",children:"Non"})]})]}),Object(I.jsx)("div",{className:"personForm__item",children:Object(I.jsx)(b.a,(t={variant:"contained",color:"primary",type:"submit",value:"Ajouter Personne",style:{borderRadius:50},endIcon:Object(I.jsx)(h.a,{})},Object(u.a)(t,"style",{backgroundColor:"#008080"}),Object(u.a)(t,"children","Ajouter Personne"),t))})]})}a(68);var N=a(47),C=a.n(N),k=a(116),D=a(111),F=a(112),A=a(114),M=a(113),S=a(115),L=a(110),E=a(39),P=a(49),_=a.n(P),V=a(38),W=a.n(V),R=a(48),B=a.n(R),J={id:"",firstname:"",lastname:"",address:"",isActive:""};function q(e){var t=e.setPersonList,a=e.personList,s=z(),i=Object(r.useState)(null),l=Object(c.a)(i,2),b=l[0],m=l[1],h=Object(r.useState)(J),y=Object(c.a)(h,2),f=y[0],O=y[1],w=Object(r.useState)([]),N=Object(c.a)(w,2),k=N[0],P=N[1],V=function(e){var t=e.target,a=t.value,r=t.name;O((function(e){return Object(j.a)(Object(j.a)({},e),{},Object(u.a)({},r,a))}))},R=function(e){if(x()(e.currentTarget).attr("class").includes("editableIcon")){var t=x()(x()(e.currentTarget).parents()[3]).find(".personID").text(),r=a.findIndex((function(e){return parseInt(e.id)===parseInt(t)}));m(r)}},q=function(e){var t=e.value,a=e.name,r=e.type,s=e.lastRow;return Object(I.jsx)(n.a.Fragment,{children:Object(I.jsx)("div",{style:{display:"flex",justifyContent:"flex-start",width:s?"70%":"100%"},children:Object(I.jsx)("input",{className:"MuiTypography-root MuiTypography-h7 MuiTypography-displayInline",defaultValue:t,name:a,type:r,style:{border:"#008080 solid 0.5px",width:"100%",margin:"2px"}})})})},G=function(){var e=Object(p.a)(o.a.mark((function e(r){var n,s,i,c,l,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),n=x()(r.currentTarget).find(".personID").find("input").attr("value"),s=a.findIndex((function(e){return parseInt(e.id)===parseInt(n)})),i="person/".concat(n),e.prev=4,c=T(r),l=c.formData,c._,e.next=8,g({formData:l,url:i});case 8:p=e.sent,console.log(p),t((function(e){return[].concat(Object(d.a)(e.slice(0,s)),[p],Object(d.a)(e.slice(s+1)))})),m(-1),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){P(a)}),[a]),Object(r.useEffect)((function(){var e=function(e,t){var a={};t.map((function(e){return a[e.id]=0})),t.map((function(t){Object.entries(t).map((function(r){String(r[1]).toLowerCase().startsWith(String(e[r[0]]).toLowerCase())&&""!=String(e[r[0]])&&(a[t.id]+=1)}))}));var r=Object.values(e).filter(Boolean).length;return a=Object.entries(a).filter((function(e){return e[1]===r})),a=Object.fromEntries(a),Object.keys(a)}(f,a);console.log(typeof e[0]),0!=e.length&&P(a.filter((function(t,a){return e.includes(String(t.id))})))}),[f]),console.log(k),Object(I.jsx)(I.Fragment,{children:Object(I.jsx)(C.a,{style:{width:"70%",height:"100%"},renderTrackHorizontal:function(e){return Object(I.jsx)("div",Object(j.a)(Object(j.a)({},e),{},{style:{display:"none"},className:"track-horizontal"}))},children:Object(I.jsx)(L.a,{item:!0,xs:16,md:12,children:Object(I.jsxs)(D.a,{className:s.List,children:[Object(I.jsxs)(F.a,{className:s.listItem,style:{backgroundColor:"#9AC2C980"},children:[Object(I.jsx)(M.a,{disableTypography:!0,primary:Object(I.jsx)(E.a,{type:"body2",style:{fontWeight:700,width:10,color:"#004040"},children:"ID"}),className:s.listItemText}),Object(I.jsx)(M.a,{disableTypography:!0,primary:Object(I.jsx)(E.a,{type:"body2",style:{fontWeight:700,width:10,color:"#004040"},children:"Pr\xe9nom"}),className:s.listItemText}),Object(I.jsx)(M.a,{disableTypography:!0,primary:Object(I.jsx)(E.a,{type:"body2",style:{fontWeight:700,width:10,color:"#004040"},children:"Nom"}),className:s.listItemText}),Object(I.jsx)(M.a,{disableTypography:!0,primary:Object(I.jsx)(E.a,{type:"body2",style:{fontWeight:700,width:10,color:"#004040"},children:"Adresse"}),className:s.listItemText}),Object(I.jsx)(M.a,{disableTypography:!0,primary:Object(I.jsx)(E.a,{type:"body2",style:{fontWeight:700,width:10,color:"#004040",paddingRight:30},children:"Actif"}),className:s.listItemText}),Object(I.jsx)(A.a,{children:Object(I.jsx)(S.a,{edge:"end","aria-label":"delete",type:"submit",children:Object(I.jsx)(W.a,{style:{display:"none"}})})}),Object(I.jsx)(A.a,{children:Object(I.jsx)(S.a,{edge:"end","aria-label":"delete",type:"submit",children:Object(I.jsx)(W.a,{style:{display:"none"}})})})]}),Object(I.jsx)("form",{className:"filterForm",children:Object(I.jsxs)(F.a,{className:s.listItem,children:[Object(I.jsx)(M.a,{disableTypography:!0,primary:Object(I.jsx)("div",{style:{display:"flex",justifyContent:"flex-start",width:"100%"},children:Object(I.jsx)("input",{className:"MuiTypography-root MuiTypography-h7 MuiTypography-displayInline",defaultValue:f.id,onChange:V,name:"id",style:{border:"#008080 solid 0.5px",width:"100%",margin:"2px"},placeholder:"Filtrer"})}),className:s.listItemText}),Object(I.jsx)(M.a,{disableTypography:!0,primary:Object(I.jsx)("div",{style:{display:"flex",justifyContent:"flex-start",width:"100%"},children:Object(I.jsx)("input",{className:"MuiTypography-root MuiTypography-h7 MuiTypography-displayInline",defaultValue:f.firstname,onChange:V,name:"firstname",style:{border:"#008080 solid 0.5px",width:"100%",margin:"2px"},placeholder:"Filtrer"})}),className:s.listItemText}),Object(I.jsx)(M.a,{disableTypography:!0,primary:Object(I.jsx)("div",{style:{display:"flex",justifyContent:"flex-start",width:"100%"},children:Object(I.jsx)("input",{className:"MuiTypography-root MuiTypography-h7 MuiTypography-displayInline",defaultValue:f.lastname,onChange:V,name:"lastname",style:{border:"#008080 solid 0.5px",width:"100%",margin:"2px"},placeholder:"Filtrer"})}),className:s.listItemText}),Object(I.jsx)(M.a,{disableTypography:!0,primary:Object(I.jsx)("div",{style:{display:"flex",justifyContent:"flex-start",width:"100%"},children:Object(I.jsx)("input",{className:"MuiTypography-root MuiTypography-h7 MuiTypography-displayInline",defaultValue:f.address,onChange:V,name:"address",style:{border:"#008080 solid 0.5px",width:"100%",margin:"2px"},placeholder:"Filtrer"})}),className:s.listItemText}),Object(I.jsx)(M.a,{disableTypography:!0,primary:Object(I.jsx)("div",{style:{display:"flex",justifyContent:"flex-start",width:"70%"},children:Object(I.jsx)("input",{className:"MuiTypography-root MuiTypography-h7 MuiTypography-displayInline",defaultValue:f.isActive,onChange:V,name:"isActive",style:{border:"#008080 solid 0.5px",width:"100%",margin:"2px"},placeholder:"Filtrer"})}),className:s.listItemText})]})}),k.map((function(e,r){return r===b?Object(I.jsx)("form",{className:"editForm",onSubmit:G,children:Object(I.jsxs)(F.a,{className:s.listItem,children:[Object(I.jsx)(M.a,{disableTypography:!0,primary:Object(I.jsx)(q,{value:e.id,name:"id"}),className:"".concat(s.listItemText," personID")}),Object(I.jsx)(M.a,{disableTypography:!0,primary:Object(I.jsx)(q,{value:e.firstname,name:"firstname"}),className:s.listItemText}),Object(I.jsx)(M.a,{disableTypography:!0,primary:Object(I.jsx)(q,{value:e.lastname,name:"lastname"}),className:s.listItemText}),Object(I.jsx)(M.a,{disableTypography:!0,primary:Object(I.jsx)(q,{value:e.address,name:"address",type:"email"}),className:s.listItemText}),Object(I.jsx)(M.a,{disableTypography:!0,primary:Object(I.jsx)(q,{value:e.isActive,name:"isActive",lastRow:!0}),className:s.listItemText}),Object(I.jsx)(A.a,{children:Object(I.jsx)(S.a,{edge:"end","aria-label":"delete",type:"submit",children:Object(I.jsx)(W.a,{style:{fill:"#008080"}})})})]})}):Object(I.jsxs)(F.a,{className:s.listItem,children:[Object(I.jsx)(M.a,{disableTypography:!0,primary:Object(I.jsx)(E.a,{type:"body2",children:e.id}),className:"".concat(s.listItemText," personID")}),Object(I.jsx)(M.a,{disableTypography:!0,primary:Object(I.jsx)(E.a,{type:"body2",children:e.firstname}),className:s.listItemText}),Object(I.jsx)(M.a,{disableTypography:!0,primary:Object(I.jsx)(E.a,{type:"body2",children:e.lastname}),className:s.listItemText}),Object(I.jsx)(M.a,{disableTypography:!0,primary:Object(I.jsx)(E.a,{type:"body2",children:e.address}),className:s.listItemText}),Object(I.jsx)(M.a,{disableTypography:!0,primary:Object(I.jsx)(E.a,{type:"body2",children:e.isActive?"1":"0"}),className:s.listItemText}),Object(I.jsxs)(A.a,{children:[Object(I.jsx)(S.a,{edge:"end","aria-label":"edit",children:Object(I.jsx)(B.a,{style:{fill:"#008080"},onClick:R,className:"editableIcon"})}),Object(I.jsx)(S.a,{edge:"end","aria-label":"delete",children:Object(I.jsx)(_.a,{style:{fill:"#008080"},onClick:function(e){var r=x()(x()(e.currentTarget).parents()[3]).find(".personID").text();v(e,r).then((function(){var e=a.findIndex((function(e){return e.id===parseInt(r)})),n=Object(d.a)(a);n.splice(e,1),t(n)}))}})})]})]})}))]})})})})}var z=Object(k.a)((function(e){var t;return{listItem:{backgroundColor:"none","&:hover":{backgroundColor:"rgba(0,0,0,0.05);",cursor:"pointer"},padding:4},listItemText:{display:"flex",justifyContent:"flex-start","&:nth-child(1)":{width:"10%",justifyContent:"center"},"&:nth-child(2)":{width:"20%"},"&:nth-child(3)":{width:"20%"},"&:nth-child(4)":{width:"30%"},"&:nth-child(5)":{width:"20%"}},button:Object(u.a)({margin:e.spacing(1)},e.breakpoints.down("sm"),{minWidth:32,paddingLeft:8,paddingRight:8,marginBottom:40,cursor:"pointer","& .MuiButton-startIcon":{margin:0}}),buttonText:(t={},Object(u.a)(t,e.breakpoints.down("sm"),{display:"none"}),Object(u.a)(t,"display","flex"),Object(u.a)(t,"marginRight",5),t),List:{padding:0},Input:{"&:nth-child(5)":{width:"70%"}}}})),G={id:"",firstname:"",lastname:"",address:"",isActive:"true"};var H=function(){var e=Object(r.useState)([]),t=Object(c.a)(e,2),a=t[0],n=t[1],s=Object(r.useState)(G),i=Object(c.a)(s,2),l=i[0],o=i[1];return Object(r.useEffect)((function(){f().then((function(e){return n(e)}))}),[]),console.log(a),Object(I.jsxs)("div",{className:"App",children:[Object(I.jsx)(w,{setPersonList:n,setFormData:o,formData:l,style:{backgroundColor:"#1169cf"},initialState:G}),Object(I.jsx)(q,{setFormData:o,setPersonList:n,personList:a})]})},U=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,118)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),r(e),n(e),s(e),i(e)}))};i.a.render(Object(I.jsx)(n.a.StrictMode,{children:Object(I.jsx)(H,{})}),document.getElementById("root")),U()}},[[87,1,2]]]);
//# sourceMappingURL=main.e37d2700.chunk.js.map