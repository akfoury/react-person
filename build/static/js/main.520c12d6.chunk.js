(this["webpackJsonpreact-person"]=this["webpackJsonpreact-person"]||[]).push([[0],{103:function(e,t,a){},104:function(e,t,a){},106:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(27),i=a.n(s),c=(a(93),a(15)),o=(a(94),a(17)),l=a.n(o),j=a(26),u=(a(96),a(160)),p=a(77),d=a.n(p),b=function(){var e=Object(j.a)(l.a.mark((function e(t,a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET",headers:{"Content-Type":"application/json"}},e.abrupt("return",fetch("/person/".concat(t,"/").concat(a),n).then((function(e){if(e.ok)return e.json();throw e})));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),m=function(){var e=Object(j.a)(l.a.mark((function e(t){var a,n,r,s,i,c,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.formData,n=t.url,r=Object.fromEntries(a.entries()),s=JSON.stringify(r),i={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:s},e.next=6,fetch(n,i);case 6:if((c=e.sent).ok){e.next=12;break}return e.next=10,c.text();case 10:throw o=e.sent,new Error(o);case 12:return e.abrupt("return",c.json());case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(j.a)(l.a.mark((function e(t){var a,n,r,s,i,c,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.formData,n=t.url,r=Object.fromEntries(a.entries()),s=JSON.stringify(r),i={method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},body:s},e.next=6,fetch(n,i);case 6:if((c=e.sent).ok){e.next=10;break}throw o=c.text(),new Error(o);case 10:return e.abrupt("return",c.json());case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(j.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"DELETE"},console.log(t),e.next=4,fetch("person/".concat(t),a);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(j.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"DELETE"},e.next=3,fetch("person/",t);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(e){var t=e.currentTarget,a=t.action;return{formData:new FormData(t),url:a}},y="SET_PERSONLIST",v="ADD_PERSONLIST",g="DELETE_PERSONLIST",N="UPDATE_PERSONLIST",T="SET_FORMDATA",L=function(e){return function(t){t({type:y,payload:e})}},E=a(29),D=a(1),w={id:"",firstname:"",lastname:"",address:"",isActive:"1"};var I={addPersonList:function(e){return function(t){t({type:v,payload:e})}},setFormData:function(e,t){return function(a){a({type:T,payload:[e,t]})}}},S=Object(E.b)((function(e){return{formData:e.formData.formData}}),I)((function(e){var t=e.addPersonList,a=e.formData,n=e.setFormData,r=function(e){n(e.name,e.value)},s=function(){var e=Object(j.a)(l.a.mark((function e(a){var r,s,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,r=x(a),s=r.formData,i=r.url,e.next=5,m({formData:s,url:i});case 5:o=e.sent,o=Object(c.a)(Object(c.a)({},o),{},{visibility:!0}),t(o),n(w),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(D.jsxs)("form",{className:"personForm",action:"/person",onSubmit:s,children:[Object(D.jsx)("h1",{children:"Ajouter une Personne"}),Object(D.jsxs)("div",{className:"personForm__item",children:[Object(D.jsx)("label",{children:"Pr\xe9nom"}),Object(D.jsx)("input",{type:"text",placeholder:"Votre pr\xe9nom",value:a.firstname,name:"firstname",onChange:function(e){return r(e.target)},required:!0})]}),Object(D.jsxs)("div",{className:"personForm__item",children:[Object(D.jsx)("label",{children:"Nom"}),Object(D.jsx)("input",{type:"text",placeholder:"Votre nom de famille",value:a.lastname,name:"lastname",onChange:function(e){return r(e.target)},required:!0})]}),Object(D.jsxs)("div",{className:"personForm__item",children:[Object(D.jsx)("label",{children:"Adresse Email"}),Object(D.jsx)("input",{type:"email",placeholder:"-----@-----.---",value:a.address,name:"address",onChange:function(e){return r(e.target)},required:!0})]}),Object(D.jsxs)("div",{className:"personForm__item",children:[Object(D.jsx)("label",{children:"Actif"}),Object(D.jsxs)("select",{onChange:function(e){return r(e.target)},value:a.isActive,name:"isActive",children:[Object(D.jsx)("option",{value:"1",children:"Oui"}),Object(D.jsx)("option",{value:"0",children:"Non"})]})]}),Object(D.jsx)("div",{className:"personForm__item",children:Object(D.jsx)(u.a,{variant:"contained",color:"primary",type:"submit",value:"Ajouter Personne",endIcon:Object(D.jsx)(d.a,{}),children:"Ajouter Personne"})})]})})),C=a(13),F=(a(103),a(159)),P=a(158),A=a(144),k=a(164),_=a(165),q=a(163),M=a(59),R=a(157),V=a(162),J=a(161),B=a(153),U=a(155),W=a(147),z=a(148),X=a(149),G=a(150),$=a(151),H=a(3);a(104);function K(e){var t=e.filterOptions,a=e.optionName,n=e.handleFormFilterInput;return Object(D.jsx)("div",{className:"filterInput",children:Object(D.jsx)("input",{className:"MuiTypography-root MuiTypography-h7 MuiTypography-displayInline columnFilter",defaultValue:t[a],onChange:n,name:a,placeholder:"Filtrer"})})}var Q=a(146),Y={id:"",firstname:"",lastname:"",address:"",isActive:""};var Z={setPersonList:L},ee=Object(E.b)((function(e){return{personList:e.personList.personList}}),Z)((function(e){var t=e.personList,a=e.setPersonList,r=Object(n.useState)(Y),s=Object(C.a)(r,2),i=s[0],o=s[1],l=function(e){var t=e.target,a=t.value,n=t.name;o((function(e){return Object(c.a)(Object(c.a)({},e),{},Object(H.a)({},n,a))}))};return Object(n.useEffect)((function(){var e=function(e,t){var a={};t.map((function(e){return a[e.id]=0})),t.map((function(t){Object.entries(t).map((function(n){String(n[1]).toLowerCase().startsWith(String(e[n[0]]).toLowerCase())&&""!=String(e[n[0]])&&(a[t.id]+=1)}))}));var n=Object.values(e).filter(Boolean).length;return a=Object.entries(a).filter((function(e){return e[1]===n})),a=Object.fromEntries(a),Object.keys(a)}(i,t);0!=e.length&&a(t.map((function(t){return e.includes(String(t.id))?Object(c.a)(Object(c.a)({},t),{},{visibility:!0}):Object(c.a)(Object(c.a)({},t),{},{visibility:!1})})))}),[i]),Object(D.jsx)("form",{className:"filterForm",children:Object(D.jsxs)(P.a,{className:"list-item filters",ContainerComponent:"div",children:[Object(D.jsx)(A.a,{disableTypography:!0,primary:Object(D.jsx)(K,{filterOptions:i,optionName:"id",handleFormFilterInput:l}),className:"list-item-text"}),Object(D.jsx)(A.a,{disableTypography:!0,primary:Object(D.jsx)(K,{filterOptions:i,optionName:"firstname",handleFormFilterInput:l}),className:"list-item-text"}),Object(D.jsx)(A.a,{disableTypography:!0,primary:Object(D.jsx)(K,{filterOptions:i,optionName:"lastname",handleFormFilterInput:l}),className:"list-item-text"}),Object(D.jsx)(A.a,{disableTypography:!0,primary:Object(D.jsx)(K,{filterOptions:i,optionName:"address",handleFormFilterInput:l}),className:"list-item-text"}),Object(D.jsx)(A.a,{disableTypography:!0,primary:Object(D.jsx)(K,{filterOptions:i,optionName:"isActive",handleFormFilterInput:l}),className:"list-item-text"}),Object(D.jsx)(k.a,{children:Object(D.jsx)(_.a,{edge:"end","aria-label":"deleteall",onClick:function(e){e.preventDefault(),e.stopPropagation(),h().then((function(){a([])}))},children:Object(D.jsx)(Q.a,{style:{fill:"#008080"},fontSize:"large"})})})]})})}));var te={setPersonList:L,updatePersonList:function(e,t){return function(a){a({type:N,payload:[e,t]})}},deletePersonList:function(e){return function(t){t({type:g,payload:e})}}},ae=Object(E.b)((function(e){return{personList:e.personList.personList}}),te)((function(e){var t=e.personList,a=e.setPersonList,s=e.deletePersonList,i=e.updatePersonList,o=Object(n.useState)(null),p=Object(C.a)(o,2),d=p[0],m=p[1],h=Object(n.useState)(1),y=Object(C.a)(h,2),v=y[0],g=y[1],N=Object(n.useState)(20),T=Object(C.a)(N,2),L=T[0],E=T[1],w=function(e){var a=e.currentTarget.dataset.idedit,n=t.findIndex((function(e){return parseInt(e.id)===parseInt(a)}));m(n)},I=function(){var e=Object(j.a)(l.a.mark((function e(a){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),a.stopPropagation(),n=a.currentTarget.dataset.iddelete,console.log(n),e.next=6,O(n);case 6:e.sent,console.log(t),r=t.findIndex((function(e){return parseInt(e.id)===parseInt(n)})),console.log(r),s(r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(e){var t=e.value,a=e.name,n=e.type;return Object(D.jsx)(r.a.Fragment,{children:Object(D.jsx)("div",{style:{display:"flex",justifyContent:"flex-start"},children:Object(D.jsx)("input",{defaultValue:t,name:a,type:n,style:{border:"#008080 solid 0.5px",width:"100%",margin:"2px"},required:!0})})})},H=function(){var e=Object(j.a)(l.a.mark((function e(a){var n,r,s,o,j,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n=a.currentTarget.querySelector("button[type=submit]").dataset.idsend,r=t.findIndex((function(e){return parseInt(e.id)===parseInt(n)})),console.log(r),s="person/".concat(n),e.prev=5,o=x(a),j=o.formData,o._,e.next=9,f({formData:j,url:s});case 9:u=e.sent,u=Object(c.a)(Object(c.a)({},u),{},{visibility:!0}),i(r,u),m(-1),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(t){return e.apply(this,arguments)}}(),K=function(e){var t=e.currentTarget.getAttribute("aria-label");g("left-pagination"===t?function(e){return 1===e?e:e-1}:function(e){return e+1})};return Object(n.useEffect)((function(){document.querySelectorAll(".show").forEach((function(e){e.parentElement.style.display="list-item"})),document.querySelectorAll(".hide").forEach((function(e){e.parentElement.style.display="none"}))}),[t]),Object(n.useEffect)((function(){b(v,L).then((function(e){e=e.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{visibility:!0})})),a(e)}))}),[v,L]),console.log(t),console.log(L),Object(D.jsxs)("div",{className:"personList",children:[Object(D.jsxs)(F.a,{children:[Object(D.jsxs)(P.a,{className:"list-item",style:{backgroundColor:"#9AC2C980"},ContainerComponent:"div",children:[Object(D.jsx)(A.a,{disableTypography:!0,primary:Object(D.jsx)(u.a,{type:"body2",children:"ID"}),className:"list-item-text"}),Object(D.jsx)(A.a,{disableTypography:!0,primary:Object(D.jsx)(u.a,{type:"body2",children:"Pr\xe9nom"}),className:"list-item-text"}),Object(D.jsx)(A.a,{disableTypography:!0,primary:Object(D.jsx)(u.a,{type:"body2",children:"Nom"}),className:"list-item-text"}),Object(D.jsx)(A.a,{disableTypography:!0,primary:Object(D.jsx)(u.a,{type:"body2",children:"Adresse"}),className:"list-item-text"}),Object(D.jsx)(A.a,{disableTypography:!0,primary:Object(D.jsx)(u.a,{type:"body2",children:"Actif"}),className:"list-item-text"}),Object(D.jsx)(k.a,{children:Object(D.jsx)(_.a,{edge:"end","aria-label":"delete",type:"submit",children:Object(D.jsx)(W.a,{style:{display:"none"}})})}),Object(D.jsx)(k.a,{children:Object(D.jsx)(_.a,{edge:"end","aria-label":"delete",type:"submit",children:Object(D.jsx)(W.a,{style:{display:"none"}})})})]}),Object(D.jsx)(ee,{})]}),Object(D.jsx)(F.a,{item:!0,xs:16,md:12,className:"grid",children:Object(D.jsx)(q.a,{className:"list",children:0!=t.length&&t.map((function(e,t){return t===d?Object(D.jsx)("form",{className:"editForm",onSubmit:H,children:Object(D.jsxs)(P.a,{className:"list-item",children:[Object(D.jsx)(A.a,{disableTypography:!0,primary:Object(D.jsx)(S,{value:e.id,name:"id"}),className:"list-item-text personID"}),Object(D.jsx)(A.a,{disableTypography:!0,primary:Object(D.jsx)(S,{value:e.firstname,name:"firstname"}),className:"list-item-text"}),Object(D.jsx)(A.a,{disableTypography:!0,primary:Object(D.jsx)(S,{value:e.lastname,name:"lastname"}),className:"list-item-text"}),Object(D.jsx)(A.a,{disableTypography:!0,primary:Object(D.jsx)(S,{value:e.address,name:"address",type:"email"}),className:"list-item-text"}),Object(D.jsx)(A.a,{disableTypography:!0,primary:Object(D.jsx)(S,{value:e.isActive,name:"isActive"}),className:"list-item-text"}),Object(D.jsx)(k.a,{children:Object(D.jsx)(_.a,{edge:"end","aria-label":"edit",type:"submit","data-idsend":e.id,children:Object(D.jsx)(W.a,{style:{fill:"#008080"}})})})]})}):Object(D.jsxs)(P.a,{className:"list-item ".concat(e.visibility?"show":"hide"),children:[Object(D.jsx)(A.a,{disableTypography:!0,primary:Object(D.jsx)(M.a,{type:"body2",children:e.id}),className:"list-item-text personID"}),Object(D.jsx)(A.a,{disableTypography:!0,primary:Object(D.jsx)(M.a,{type:"body2",children:e.firstname}),className:"list-item-text"}),Object(D.jsx)(A.a,{disableTypography:!0,primary:Object(D.jsx)(M.a,{type:"body2",children:e.lastname}),className:"list-item-text"}),Object(D.jsx)(A.a,{disableTypography:!0,primary:Object(D.jsx)(M.a,{type:"body2",children:e.address}),className:"list-item-text"}),Object(D.jsx)(A.a,{disableTypography:!0,primary:parseInt(e.isActive)?Object(D.jsx)(R.a,{style:{backgroundColor:"rgba(53, 219, 94, 0.8)",color:"white",fontWeight:700},label:"Actif"}):Object(D.jsx)(R.a,{style:{backgroundColor:"rgba(209, 42, 23, 0.8)",color:"white",fontWeight:700},label:"Inactif"}),className:"list-item-text"}),Object(D.jsxs)(k.a,{children:[Object(D.jsx)(_.a,{edge:"end","aria-label":"edit",onClick:w,"data-idedit":e.id,children:Object(D.jsx)(z.a,{style:{fill:"#008080"}})}),Object(D.jsx)(_.a,{edge:"end","aria-label":"delete",onClick:I,"data-iddelete":e.id,children:Object(D.jsx)(X.a,{style:{fill:"#008080"}})})]})]})}))})}),Object(D.jsx)(F.a,{children:Object(D.jsx)(q.a,{children:Object(D.jsxs)(P.a,{className:"pagination-listitem",children:[Object(D.jsxs)(V.a,{children:[Object(D.jsx)(_.a,{edge:"end",id:"left-pagination","aria-label":"left-pagination",onClick:K,children:Object(D.jsx)(G.a,{style:{fill:"#008080"}})}),Object(D.jsx)("input",{type:"text",size:"1",value:v,onChange:function(e){(""===e.target.value||/^[+]?\d+([.]\d+)?$/.test(e.target.value))&&g(parseInt(e.target.value))},id:"input-pagination"}),Object(D.jsx)(_.a,{edge:"end",id:"right-pagination","aria-label":"right-pagination",onClick:K,children:Object(D.jsx)($.a,{style:{fill:"#008080"}})})]}),Object(D.jsx)(J.a,{className:"pagination-select",children:Object(D.jsxs)(B.a,{defaultValue:"20",value:L,onChange:function(e){E(parseInt(e.target.value))},label:"Pagination",children:[Object(D.jsx)(U.a,{value:20,children:"20"}),Object(D.jsx)(U.a,{value:40,children:"40"}),Object(D.jsx)(U.a,{value:60,children:"60"}),Object(D.jsx)(U.a,{value:100,children:"100"})]})})]})})})]})}));var ne={setPersonList:L},re=Object(E.b)((function(e){return{}}),ne)((function(e){var t=e.setPersonList;return Object(n.useEffect)((function(){b(1,20).then((function(e){e=e.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{visibility:!0})})),t(e)}))}),[]),Object(D.jsxs)("div",{className:"App",children:[Object(D.jsx)(S,{}),Object(D.jsx)(ae,{})]})})),se=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,166)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),s(e),i(e)}))},ie=a(43),ce=a(78),oe=a(14),le={personList:[]};var je={formData:{id:"",firstname:"",lastname:"",address:"",isActive:"1"}};var ue=Object(ie.b)({personList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return console.log(t.payload),Object(c.a)(Object(c.a)({},e),{},{personList:Object(oe.a)(t.payload)});case v:return Object(c.a)(Object(c.a)({},e),{},{personList:[t.payload].concat(Object(oe.a)(e.personList))});case g:var a=Object(oe.a)(e.personList);return Object(c.a)(Object(c.a)({},e),{},{personList:a.filter((function(e,a){return a!==t.payload}))});case N:var n=Object(oe.a)(e.personList);return Object(c.a)(Object(c.a)({},e),{},{personList:[].concat(Object(oe.a)(n.slice(0,t.payload[0])),[t.payload[1]],Object(oe.a)(n.slice(t.payload[0]+1)))});default:return e}},formData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;return t.type===T?Object(c.a)(Object(c.a)({},e),{},{formData:Object(c.a)(Object(c.a)({},e.formData),{},Object(H.a)({},t.payload[0],t.payload[1]))}):e}}),pe=ue,de=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ie.c,be=Object(ie.d)(pe,{},de(Object(ie.a)(ce.a)));i.a.render(Object(D.jsx)(r.a.StrictMode,{children:Object(D.jsx)(E.a,{store:be,children:Object(D.jsx)(re,{})})}),document.getElementById("root")),se()},93:function(e,t,a){},94:function(e,t,a){},96:function(e,t,a){}},[[106,1,2]]]);
//# sourceMappingURL=main.520c12d6.chunk.js.map