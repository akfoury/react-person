{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Alex/Documents/react-person/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"C:/Users/Alex/Documents/react-person/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Alex/Documents/react-person/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:/Users/Alex/Documents/react-person/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/Alex/Documents/react-person/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React from'react';import'./PersonForm.css';import Button from'@material-ui/core/Button';import AddCircleOutlineIcon from'@material-ui/icons/AddCircleOutline';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function PersonForm(_ref){var _jsx2;var setPersonList=_ref.setPersonList,setFormData=_ref.setFormData,formData=_ref.formData,initialState=_ref.initialState;var stateUpdate=function stateUpdate(target){setFormData(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},target.name,target.value));});};var postFormDataAsJson=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref2){var url,formData,plainFormData,formDataJsonString,fetchOptions,response,errorMessage;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url=_ref2.url,formData=_ref2.formData;plainFormData=Object.fromEntries(formData.entries());formDataJsonString=JSON.stringify(plainFormData);fetchOptions={method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"Accept\":\"application/json\"},body:formDataJsonString};_context.next=6;return fetch(url,fetchOptions);case 6:response=_context.sent;if(response.ok){_context.next=12;break;}_context.next=10;return response.text();case 10:errorMessage=_context.sent;throw new Error(errorMessage);case 12:return _context.abrupt(\"return\",response.json());case 13:case\"end\":return _context.stop();}}},_callee);}));return function postFormDataAsJson(_x){return _ref3.apply(this,arguments);};}();var handleFormSubmit=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var form,url,_formData,responseData;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();form=e.currentTarget;url=form.action;_context2.prev=3;_formData=new FormData(form);_context2.next=7;return postFormDataAsJson({url:url,formData:_formData});case 7:responseData=_context2.sent;setPersonList(function(prevState){return[].concat(_toConsumableArray(prevState),[responseData]);});setFormData(initialState);_context2.next=15;break;case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](3);console.error(_context2.t0);case 15:case\"end\":return _context2.stop();}}},_callee2,null,[[3,12]]);}));return function handleFormSubmit(_x2){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"form\",{className:\"personForm\",action:\"/person\",onSubmit:handleFormSubmit,style:{backgroundColor:'#9AC2C9'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"personForm__item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nom\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.firstname,name:\"firstname\",onChange:function onChange(e){return stateUpdate(e.target);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"personForm__item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Pr\\xE9nom\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.lastname,name:\"lastname\",onChange:function onChange(e){return stateUpdate(e.target);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"personForm__item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Adresse\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.address,name:\"address\",onChange:function onChange(e){return stateUpdate(e.target);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"personForm__item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Actif\"}),/*#__PURE__*/_jsxs(\"select\",{onChange:function onChange(e){return stateUpdate(e.target);},value:formData.isActive,name:\"isActive\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"true\",children:\"Yes\"}),/*#__PURE__*/_jsx(\"option\",{value:\"false\",children:\"No\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"personForm__item\",children:/*#__PURE__*/_jsx(Button,(_jsx2={variant:\"contained\",color:\"primary\",type:\"submit\",value:\"Ajouter Personne\",style:{borderRadius:50},endIcon:/*#__PURE__*/_jsx(AddCircleOutlineIcon,{})},_defineProperty(_jsx2,\"style\",{backgroundColor:'#008080'}),_defineProperty(_jsx2,\"children\",\"Ajouter Personne\"),_jsx2))})]});}","map":{"version":3,"sources":["C:/Users/Alex/Documents/react-person/src/components/PersonForm/PersonForm.js"],"names":["React","Button","AddCircleOutlineIcon","PersonForm","setPersonList","setFormData","formData","initialState","stateUpdate","target","prevState","name","value","postFormDataAsJson","url","plainFormData","Object","fromEntries","entries","formDataJsonString","JSON","stringify","fetchOptions","method","headers","body","fetch","response","ok","text","errorMessage","Error","json","handleFormSubmit","e","preventDefault","form","currentTarget","action","FormData","responseData","console","error","backgroundColor","firstname","lastname","address","isActive","borderRadius"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport './PersonForm.css';\r\nimport Button from '@material-ui/core/Button';\r\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline';\r\n\r\nexport default function PersonForm( { setPersonList, setFormData, formData, initialState }) {\r\n    const stateUpdate = target => {\r\n        setFormData(prevState => {\r\n            return {...prevState, [target.name]: target.value};\r\n        });\r\n    }\r\n\r\n    const postFormDataAsJson = async ({ url, formData }) => {\r\n        const plainFormData = Object.fromEntries(formData.entries());\r\n        const formDataJsonString = JSON.stringify(plainFormData);\r\n    \r\n        const fetchOptions = {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Accept\": \"application/json\",\r\n            },\r\n            body: formDataJsonString,\r\n        };\r\n    \r\n        const response = await fetch(url, fetchOptions);\r\n    \r\n        if (!response.ok) {\r\n            const errorMessage = await response.text();\r\n            throw new Error(errorMessage);\r\n        }\r\n    \r\n        return response.json();\r\n    }\r\n    \r\n    const handleFormSubmit = async (e) => {\r\n        e.preventDefault();\r\n    \r\n        const form = e.currentTarget;\r\n        const url = form.action;\r\n    \r\n        try {\r\n            const formData = new FormData(form);\r\n            const responseData = await postFormDataAsJson({ url, formData });\r\n            setPersonList(prevState => {\r\n                return [...prevState, responseData];\r\n            });\r\n            setFormData(initialState);\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <form className=\"personForm\" action=\"/person\" onSubmit={handleFormSubmit} style={{ backgroundColor: '#9AC2C9'}}>\r\n            <div className=\"personForm__item\">\r\n                <label>Nom</label>\r\n                <input type=\"text\" value={formData.firstname} name=\"firstname\" onChange={e => stateUpdate(e.target)} />\r\n            </div>\r\n            <div className=\"personForm__item\">\r\n                <label>Prénom</label>\r\n                <input type=\"text\" value={formData.lastname} name=\"lastname\" onChange={e => stateUpdate(e.target)} />\r\n            </div>\r\n            <div className=\"personForm__item\">\r\n                <label>Adresse</label>\r\n                <input type=\"text\" value={formData.address} name=\"address\" onChange={e => stateUpdate(e.target)} />\r\n            </div>\r\n            <div className=\"personForm__item\">\r\n                <label>Actif</label>\r\n                <select onChange={e => stateUpdate(e.target)} value={formData.isActive} name=\"isActive\">\r\n                    <option value=\"true\">Yes</option>\r\n                    <option value=\"false\">No</option>\r\n                </select>\r\n            </div>\r\n            <div className=\"personForm__item\">\r\n                <Button \r\n                    variant=\"contained\" \r\n                    color=\"primary\" \r\n                    type=\"submit\"\r\n                    value=\"Ajouter Personne\"\r\n                    style={{ borderRadius: 50 }} \r\n                    endIcon={<AddCircleOutlineIcon />}\r\n                    style={{backgroundColor: '#008080' }}\r\n                >\r\n                    Ajouter Personne\r\n                </Button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}