{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Alex/Documents/react-person/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"C:/Users/Alex/Documents/react-person/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"C:/Users/Alex/Documents/react-person/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React from'react';import'./PersonForm.css';import Button from'@mui/material/Button';import AddCircleOutlineIcon from'@mui/icons-material/AddCircleOutline';import{postFormDataAsJson}from'../../api/PersonAPI';import{convertFormDataToObject}from'../../utils/FormData';import{addPersonList,setFormData}from\"../../actions\";import{connect}from\"react-redux\";// Objet de réinitialisation du formulaire d'ajout\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialFormData={id:'',firstname:'',lastname:'',address:'',isActive:'1'};function PersonForm(_ref){var addPersonList=_ref.addPersonList,formData=_ref.formData,setFormData=_ref.setFormData;// Mise à jour du formulaire\nvar stateUpdate=function stateUpdate(target){setFormData(target.name,target.value);};// Gérer le formulaire de l'ajout d'une personne\nvar handleFormSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _convertFormDataToObj,_formData,url,responseData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_convertFormDataToObj=convertFormDataToObject(e),_formData=_convertFormDataToObj.formData,url=_convertFormDataToObj.url;_context.next=5;return postFormDataAsJson({formData:_formData,url:url});case 5:responseData=_context.sent;responseData=_objectSpread(_objectSpread({},responseData),{},{visibility:true});addPersonList(responseData);setFormData(initialFormData);_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);console.error(_context.t0);case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,11]]);}));return function handleFormSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"form\",{className:\"personForm\",action:\"/person\",onSubmit:handleFormSubmit,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Ajouter une Personne\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"personForm__item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Pr\\xE9nom\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Votre pr\\xE9nom\",value:formData.firstname,name:\"firstname\",onChange:function onChange(e){return stateUpdate(e.target);},required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"personForm__item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nom\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Votre nom de famille\",value:formData.lastname,name:\"lastname\",onChange:function onChange(e){return stateUpdate(e.target);},required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"personForm__item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Adresse Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"-----@-----.---\",value:formData.address,name:\"address\",onChange:function onChange(e){return stateUpdate(e.target);},required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"personForm__item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Actif\"}),/*#__PURE__*/_jsxs(\"select\",{onChange:function onChange(e){return stateUpdate(e.target);},value:formData.isActive,name:\"isActive\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"Oui\"}),/*#__PURE__*/_jsx(\"option\",{value:\"0\",children:\"Non\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"personForm__item\",children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",type:\"submit\",value:\"Ajouter Personne\",endIcon:/*#__PURE__*/_jsx(AddCircleOutlineIcon,{}),children:\"Ajouter Personne\"})})]});}var mapStateToProps=function mapStateToProps(state){return{formData:state.formData.formData};};var mapDispatchToProps={addPersonList:addPersonList,setFormData:setFormData};export default connect(mapStateToProps,mapDispatchToProps)(PersonForm);","map":{"version":3,"sources":["C:/Users/Alex/Documents/react-person/src/components/PersonForm/PersonForm.js"],"names":["React","Button","AddCircleOutlineIcon","postFormDataAsJson","convertFormDataToObject","addPersonList","setFormData","connect","initialFormData","id","firstname","lastname","address","isActive","PersonForm","formData","stateUpdate","target","name","value","handleFormSubmit","e","preventDefault","url","responseData","visibility","console","error","mapStateToProps","state","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport './PersonForm.css';\r\nimport Button from '@mui/material/Button';\r\nimport AddCircleOutlineIcon from '@mui/icons-material/AddCircleOutline';\r\nimport { postFormDataAsJson } from '../../api/PersonAPI';\r\nimport { convertFormDataToObject } from '../../utils/FormData';\r\nimport { addPersonList, setFormData } from \"../../actions\";\r\nimport { connect } from \"react-redux\";\r\n\r\n// Objet de réinitialisation du formulaire d'ajout\r\nconst initialFormData = {\r\n    id: '',\r\n    firstname: '',\r\n    lastname: '',\r\n    address: '',\r\n    isActive: '1'\r\n}\r\n\r\nfunction PersonForm( { addPersonList, formData, setFormData }) {\r\n    // Mise à jour du formulaire\r\n    const stateUpdate = target => {\r\n        setFormData(target.name, target.value);\r\n    }\r\n    \r\n    // Gérer le formulaire de l'ajout d'une personne\r\n    const handleFormSubmit = async (e) => {\r\n        e.preventDefault();\r\n    \r\n        try {\r\n            const { formData, url } = convertFormDataToObject(e);\r\n            let responseData = await postFormDataAsJson({ formData, url });\r\n\r\n            responseData = {...responseData, visibility: true};\r\n            addPersonList(responseData);\r\n            setFormData(initialFormData);\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <form className=\"personForm\" action=\"/person\" onSubmit={handleFormSubmit}>\r\n            <h1>Ajouter une Personne</h1>\r\n            <div className=\"personForm__item\">\r\n                <label>Prénom</label>\r\n                <input type=\"text\" placeholder=\"Votre prénom\" value={formData.firstname} name=\"firstname\" onChange={e => stateUpdate(e.target)} required />\r\n            </div>\r\n            <div className=\"personForm__item\">\r\n                <label>Nom</label>\r\n                <input type=\"text\" placeholder=\"Votre nom de famille\" value={formData.lastname} name=\"lastname\" onChange={e => stateUpdate(e.target)} required />\r\n            </div>\r\n            <div className=\"personForm__item\">\r\n                <label>Adresse Email</label>\r\n                <input type=\"email\" placeholder=\"-----@-----.---\" value={formData.address} name=\"address\" onChange={e => stateUpdate(e.target)} required />\r\n            </div>\r\n            <div className=\"personForm__item\">\r\n                <label>Actif</label>\r\n                <select onChange={e => stateUpdate(e.target)} value={formData.isActive} name=\"isActive\">\r\n                    <option value=\"1\">Oui</option>\r\n                    <option value=\"0\">Non</option>\r\n                </select>\r\n            </div>\r\n            <div className=\"personForm__item\">\r\n                <Button \r\n                    variant=\"contained\" \r\n                    color=\"primary\" \r\n                    type=\"submit\"\r\n                    value=\"Ajouter Personne\"\r\n                    endIcon={<AddCircleOutlineIcon />}\r\n                >\r\n                    Ajouter Personne\r\n                </Button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        formData: state.formData.formData\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    addPersonList,\r\n    setFormData\r\n  }\r\n  \r\nexport default connect(mapStateToProps, mapDispatchToProps)(PersonForm);"]},"metadata":{},"sourceType":"module"}