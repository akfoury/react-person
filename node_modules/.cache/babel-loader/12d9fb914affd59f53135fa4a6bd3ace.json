{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Alex/Documents/react-person/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"C:/Users/Alex/Documents/react-person/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"C:/Users/Alex/Documents/react-person/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:/Users/Alex/Documents/react-person/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/Alex/Documents/react-person/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React from'react';import'./PersonForm.css';import Button from'@material-ui/core/Button';import AddCircleOutlineIcon from'@material-ui/icons/AddCircleOutline';import{postFormDataAsJson}from'../../api/PersonAPI';import{convertFormDataToObject}from'../../utils/FormData';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function PersonForm(_ref){var _jsx2;var setPersonList=_ref.setPersonList,setFormData=_ref.setFormData,formData=_ref.formData,initialState=_ref.initialState;// Mise à jour du formulaire\nvar stateUpdate=function stateUpdate(target){setFormData(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},target.name,target.value));});};// Gérer le formulaire de l'ajout d'une personne\nvar handleFormSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _convertFormDataToObj,_formData,url,responseData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_convertFormDataToObj=convertFormDataToObject(e),_formData=_convertFormDataToObj.formData,url=_convertFormDataToObj.url;_context.next=5;return postFormDataAsJson({formData:_formData,url:url});case 5:responseData=_context.sent;setPersonList(function(prevState){return[responseData].concat(_toConsumableArray(prevState));});setFormData(initialState);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);console.error(_context.t0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[1,10]]);}));return function handleFormSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"form\",{className:\"personForm\",action:\"/person\",onSubmit:handleFormSubmit,style:{backgroundColor:'#9AC2C9'},children:[/*#__PURE__*/_jsx(\"h1\",{style:{paddingLeft:'24px',color:'#008080',fontWeight:'700'},children:\"Ajouter une Personne\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"personForm__item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Pr\\xE9nom\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Votre pr\\xE9nom\",value:formData.firstname,name:\"firstname\",onChange:function onChange(e){return stateUpdate(e.target);},required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"personForm__item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nom\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Votre nom de famille\",value:formData.lastname,name:\"lastname\",onChange:function onChange(e){return stateUpdate(e.target);},required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"personForm__item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Adresse Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"-----@-----.---\",value:formData.address,name:\"address\",onChange:function onChange(e){return stateUpdate(e.target);},required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"personForm__item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Actif\"}),/*#__PURE__*/_jsxs(\"select\",{onChange:function onChange(e){return stateUpdate(e.target);},value:formData.isActive,name:\"isActive\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"true\",children:\"Oui\"}),/*#__PURE__*/_jsx(\"option\",{value:\"false\",children:\"Non\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"personForm__item\",children:/*#__PURE__*/_jsx(Button,(_jsx2={variant:\"contained\",color:\"primary\",type:\"submit\",value:\"Ajouter Personne\",style:{borderRadius:50},endIcon:/*#__PURE__*/_jsx(AddCircleOutlineIcon,{})},_defineProperty(_jsx2,\"style\",{backgroundColor:'#008080'}),_defineProperty(_jsx2,\"children\",\"Ajouter Personne\"),_jsx2))})]});}","map":{"version":3,"sources":["C:/Users/Alex/Documents/react-person/src/components/PersonForm/PersonForm.js"],"names":["React","Button","AddCircleOutlineIcon","postFormDataAsJson","convertFormDataToObject","PersonForm","setPersonList","setFormData","formData","initialState","stateUpdate","target","prevState","name","value","handleFormSubmit","e","preventDefault","url","responseData","console","error","backgroundColor","paddingLeft","color","fontWeight","firstname","lastname","address","isActive","borderRadius"],"mappings":"6wBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,kBAAP,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,oBAAP,KAAiC,qCAAjC,CACA,OAASC,kBAAT,KAAmC,qBAAnC,CACA,OAASC,uBAAT,KAAwC,sBAAxC,C,wFAEA,cAAe,SAASC,CAAAA,UAAT,MAA6E,cAAtDC,CAAAA,aAAsD,MAAtDA,aAAsD,CAAvCC,WAAuC,MAAvCA,WAAuC,CAA1BC,QAA0B,MAA1BA,QAA0B,CAAhBC,YAAgB,MAAhBA,YAAgB,CACxF;AACA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAAAC,MAAM,CAAI,CAC1BJ,WAAW,CAAC,SAAAK,SAAS,CAAI,CACrB,sCAAWA,SAAX,wBAAuBD,MAAM,CAACE,IAA9B,CAAqCF,MAAM,CAACG,KAA5C,GACH,CAFU,CAAX,CAGH,CAJD,CAMA;AACA,GAAMC,CAAAA,gBAAgB,2FAAG,iBAAOC,CAAP,uKACrBA,CAAC,CAACC,cAAF,GADqB,sCAISb,uBAAuB,CAACY,CAAD,CAJhC,CAITR,SAJS,uBAITA,QAJS,CAICU,GAJD,uBAICA,GAJD,uBAKUf,CAAAA,kBAAkB,CAAC,CAAEK,QAAQ,CAARA,SAAF,CAAYU,GAAG,CAAHA,GAAZ,CAAD,CAL5B,QAKXC,YALW,eAMjBb,aAAa,CAAC,SAAAM,SAAS,CAAI,CACvB,OAAQO,YAAR,4BAAyBP,SAAzB,GACH,CAFY,CAAb,CAGAL,WAAW,CAACE,YAAD,CAAX,CATiB,iFAWjBW,OAAO,CAACC,KAAR,cAXiB,qEAAH,kBAAhBN,CAAAA,gBAAgB,6CAAtB,CAeA,mBACI,cAAM,SAAS,CAAC,YAAhB,CAA6B,MAAM,CAAC,SAApC,CAA8C,QAAQ,CAAEA,gBAAxD,CAA0E,KAAK,CAAE,CAAEO,eAAe,CAAE,SAAnB,CAAjF,wBACI,WAAI,KAAK,CAAE,CAACC,WAAW,CAAE,MAAd,CAAsBC,KAAK,CAAE,SAA7B,CAAwCC,UAAU,CAAE,KAApD,CAAX,kCADJ,cAEI,aAAK,SAAS,CAAC,kBAAf,wBACI,oCADJ,cAEI,cAAO,IAAI,CAAC,MAAZ,CAAmB,WAAW,CAAC,iBAA/B,CAA8C,KAAK,CAAEjB,QAAQ,CAACkB,SAA9D,CAAyE,IAAI,CAAC,WAA9E,CAA0F,QAAQ,CAAE,kBAAAV,CAAC,QAAIN,CAAAA,WAAW,CAACM,CAAC,CAACL,MAAH,CAAf,EAArG,CAAgI,QAAQ,KAAxI,EAFJ,GAFJ,cAMI,aAAK,SAAS,CAAC,kBAAf,wBACI,8BADJ,cAEI,cAAO,IAAI,CAAC,MAAZ,CAAmB,WAAW,CAAC,sBAA/B,CAAsD,KAAK,CAAEH,QAAQ,CAACmB,QAAtE,CAAgF,IAAI,CAAC,UAArF,CAAgG,QAAQ,CAAE,kBAAAX,CAAC,QAAIN,CAAAA,WAAW,CAACM,CAAC,CAACL,MAAH,CAAf,EAA3G,CAAsI,QAAQ,KAA9I,EAFJ,GANJ,cAUI,aAAK,SAAS,CAAC,kBAAf,wBACI,wCADJ,cAEI,cAAO,IAAI,CAAC,OAAZ,CAAoB,WAAW,CAAC,iBAAhC,CAAkD,KAAK,CAAEH,QAAQ,CAACoB,OAAlE,CAA2E,IAAI,CAAC,SAAhF,CAA0F,QAAQ,CAAE,kBAAAZ,CAAC,QAAIN,CAAAA,WAAW,CAACM,CAAC,CAACL,MAAH,CAAf,EAArG,CAAgI,QAAQ,KAAxI,EAFJ,GAVJ,cAcI,aAAK,SAAS,CAAC,kBAAf,wBACI,gCADJ,cAEI,gBAAQ,QAAQ,CAAE,kBAAAK,CAAC,QAAIN,CAAAA,WAAW,CAACM,CAAC,CAACL,MAAH,CAAf,EAAnB,CAA8C,KAAK,CAAEH,QAAQ,CAACqB,QAA9D,CAAwE,IAAI,CAAC,UAA7E,wBACI,eAAQ,KAAK,CAAC,MAAd,iBADJ,cAEI,eAAQ,KAAK,CAAC,OAAd,iBAFJ,GAFJ,GAdJ,cAqBI,YAAK,SAAS,CAAC,kBAAf,uBACI,KAAC,MAAD,SACI,OAAO,CAAC,WADZ,CAEI,KAAK,CAAC,SAFV,CAGI,IAAI,CAAC,QAHT,CAII,KAAK,CAAC,kBAJV,CAKI,KAAK,CAAE,CAAEC,YAAY,CAAE,EAAhB,CALX,CAMI,OAAO,cAAE,KAAC,oBAAD,IANb,gCAOW,CAACR,eAAe,CAAE,SAAlB,CAPX,8DADJ,EArBJ,GADJ,CAqCH","sourcesContent":["import React from 'react';\r\nimport './PersonForm.css';\r\nimport Button from '@material-ui/core/Button';\r\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline';\r\nimport { postFormDataAsJson } from '../../api/PersonAPI';\r\nimport { convertFormDataToObject } from '../../utils/FormData';\r\n\r\nexport default function PersonForm( { setPersonList, setFormData, formData, initialState }) {\r\n    // Mise à jour du formulaire\r\n    const stateUpdate = target => {\r\n        setFormData(prevState => {\r\n            return {...prevState, [target.name]: target.value};\r\n        });\r\n    }\r\n    \r\n    // Gérer le formulaire de l'ajout d'une personne\r\n    const handleFormSubmit = async (e) => {\r\n        e.preventDefault();\r\n    \r\n        try {\r\n            const { formData, url } = convertFormDataToObject(e);\r\n            const responseData = await postFormDataAsJson({ formData, url });\r\n            setPersonList(prevState => {\r\n                return [responseData, ...prevState];\r\n            });\r\n            setFormData(initialState);\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <form className=\"personForm\" action=\"/person\" onSubmit={handleFormSubmit} style={{ backgroundColor: '#9AC2C9'}}>\r\n            <h1 style={{paddingLeft: '24px', color: '#008080', fontWeight: '700'}}>Ajouter une Personne</h1>\r\n            <div className=\"personForm__item\">\r\n                <label>Prénom</label>\r\n                <input type=\"text\" placeholder=\"Votre prénom\" value={formData.firstname} name=\"firstname\" onChange={e => stateUpdate(e.target)} required />\r\n            </div>\r\n            <div className=\"personForm__item\">\r\n                <label>Nom</label>\r\n                <input type=\"text\" placeholder=\"Votre nom de famille\" value={formData.lastname} name=\"lastname\" onChange={e => stateUpdate(e.target)} required />\r\n            </div>\r\n            <div className=\"personForm__item\">\r\n                <label>Adresse Email</label>\r\n                <input type=\"email\" placeholder=\"-----@-----.---\" value={formData.address} name=\"address\" onChange={e => stateUpdate(e.target)} required />\r\n            </div>\r\n            <div className=\"personForm__item\">\r\n                <label>Actif</label>\r\n                <select onChange={e => stateUpdate(e.target)} value={formData.isActive} name=\"isActive\">\r\n                    <option value=\"true\">Oui</option>\r\n                    <option value=\"false\">Non</option>\r\n                </select>\r\n            </div>\r\n            <div className=\"personForm__item\">\r\n                <Button \r\n                    variant=\"contained\" \r\n                    color=\"primary\" \r\n                    type=\"submit\"\r\n                    value=\"Ajouter Personne\"\r\n                    style={{ borderRadius: 50 }} \r\n                    endIcon={<AddCircleOutlineIcon />}\r\n                    style={{backgroundColor: '#008080' }}\r\n                >\r\n                    Ajouter Personne\r\n                </Button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}