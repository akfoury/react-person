{"ast":null,"code":"// Récupérer toutes les personnes de la base de données\nconst getAllPerson = () => {\n  const myInit = {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  };\n  fetch('/person', myInit).then(response => {\n    if (response.ok) {\n      return response.json();\n    }\n\n    throw response;\n  }).then(data => setPersonList(data));\n}; // Récupérer une ou toutes les personnes de la base de données\n\n\nconst postFormDataAsJson = async ({\n  url,\n  formData\n}) => {\n  const plainFormData = Object.fromEntries(formData.entries());\n  const formDataJsonString = JSON.stringify(plainFormData);\n  const fetchOptions = {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"Accept\": \"application/json\"\n    },\n    body: formDataJsonString\n  };\n  const response = await fetch(url, fetchOptions);\n\n  if (!response.ok) {\n    const errorMessage = await response.text();\n    throw new Error(errorMessage);\n  }\n\n  return response.json();\n}; // Mettre à jour une personne\n\n\nconst putFormDataAsJson = async ({\n  url,\n  formData\n}) => {\n  const plainFormData = Object.fromEntries(formData.entries());\n  const formDataJsonString = JSON.stringify(plainFormData);\n  const fetchOptions = {\n    method: \"PUT\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"Accept\": \"application/json\"\n    },\n    body: formDataJsonString\n  };\n  const response = await fetch(url, fetchOptions);\n\n  if (!response.ok) {\n    const errorMessage = await response.text();\n    throw new Error(errorMessage);\n  }\n\n  return response.json();\n}; // Supprimer une personne de la liste\n\n\nconst deletePerson = e => {\n  // Supprimer l'élément dans la base de données\n  const personID = $($(e.currentTarget).parents()[3]).find('.personID').text();\n  const myInit = {\n    method: 'DELETE'\n  };\n  fetch(`person/${personID}`, myInit).then(() => {\n    // Récuperer l'index de l'élément à supprimer\n    const removeIndex = personList.findIndex(item => item.id === parseInt(personID)); // Faire une copie du state\n\n    const newArray = [...personList]; // Supprimer l'élément du nouveau tableau\n\n    newArray.splice(removeIndex, 1); // Mettre à jour le state\n\n    setPersonList(newArray);\n  });\n};\n\nexport { getAllPerson, postFormDataAsJson, putFormDataAsJson, deletePerson };","map":{"version":3,"sources":["C:/Users/Alex/Documents/react-person/src/api/PersonAPI.js"],"names":["getAllPerson","myInit","method","headers","fetch","then","response","ok","json","data","setPersonList","postFormDataAsJson","url","formData","plainFormData","Object","fromEntries","entries","formDataJsonString","JSON","stringify","fetchOptions","body","errorMessage","text","Error","putFormDataAsJson","deletePerson","e","personID","$","currentTarget","parents","find","removeIndex","personList","findIndex","item","id","parseInt","newArray","splice"],"mappings":"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","sourcesContent":["// Récupérer toutes les personnes de la base de données\r\nconst getAllPerson = () => {\r\nconst myInit = {\r\n    method: 'GET',\r\n    headers: {\r\n    'Content-Type': 'application/json'\r\n    }\r\n};\r\nfetch('/person', myInit)\r\n    .then(response => {\r\n    if(response.ok) {\r\n        return response.json();\r\n    }\r\n    throw response;\r\n    })\r\n    .then(data => setPersonList(data));\r\n}\r\n\r\n// Récupérer une ou toutes les personnes de la base de données\r\nconst postFormDataAsJson = async ({ url, formData }) => {\r\n    const plainFormData = Object.fromEntries(formData.entries());\r\n    const formDataJsonString = JSON.stringify(plainFormData);\r\n\r\n    const fetchOptions = {\r\n        method: \"POST\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            \"Accept\": \"application/json\",\r\n        },\r\n        body: formDataJsonString,\r\n    };\r\n\r\n    const response = await fetch(url, fetchOptions);\r\n\r\n    if (!response.ok) {\r\n        const errorMessage = await response.text();\r\n        throw new Error(errorMessage);\r\n    }\r\n\r\n    return response.json();\r\n}\r\n\r\n// Mettre à jour une personne\r\nconst putFormDataAsJson = async ({ url, formData }) => {\r\n    const plainFormData = Object.fromEntries(formData.entries());\r\n    const formDataJsonString = JSON.stringify(plainFormData);\r\n\r\n    const fetchOptions = {\r\n        method: \"PUT\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            \"Accept\": \"application/json\",\r\n        },\r\n        body: formDataJsonString,\r\n    };\r\n\r\n    const response = await fetch(url, fetchOptions);\r\n\r\n    if (!response.ok) {\r\n        const errorMessage = await response.text();\r\n        throw new Error(errorMessage);\r\n    }\r\n\r\n    return response.json();\r\n}\r\n\r\n\r\n// Supprimer une personne de la liste\r\nconst deletePerson = (e) => {\r\n    // Supprimer l'élément dans la base de données\r\n    const personID = $($(e.currentTarget).parents()[3]).find('.personID').text();\r\n    const myInit = {\r\n        method: 'DELETE',\r\n    };\r\n    fetch(`person/${personID}`, myInit)\r\n    .then(() => {\r\n    // Récuperer l'index de l'élément à supprimer\r\n    const removeIndex = personList.findIndex(item => item.id === parseInt(personID));\r\n\r\n    // Faire une copie du state\r\n    const newArray = [...personList];\r\n\r\n    // Supprimer l'élément du nouveau tableau\r\n    newArray.splice(removeIndex, 1);\r\n\r\n    // Mettre à jour le state\r\n    setPersonList(newArray);\r\n    });\r\n};\r\n\r\nexport { getAllPerson, postFormDataAsJson, putFormDataAsJson, deletePerson }"]},"metadata":{},"sourceType":"module"}